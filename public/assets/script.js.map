{"version":3,"sources":["../../src/script/script.js"],"names":["vm","Vue","el","data","count","methods","countUp","changeRotateSpeed","vm_stop","hsStop","Speed_0","howManySpinners","scene","THREE","Scene","box","controls","renderer","camera","model","model2","model3","rotate_speed","r_radian","c_radian","geometry","material","hs_color","hs_rotate","db","firebase","database","fbHandSpinners","ref","changeData","document","getElementById","value","randId","Math","floor","random","randX","randY","randZ","push","on","snapshot","myJson","JSON","stringify","row_data","val","tmp_key","Object","keys","addHandSpinner","color","rotate","x_position","y_position","z_position","renderHandSpinner","light","ambient","gridHelper","axisHelper","lightHelp","width","height","modelPath","DirectionalLight","position","set","add","AmbientLight","PerspectiveCamera","lookAt","OrbitControls","autoRotate","autoRotateSpeed","WebGLRenderer","antialias","setSize","setClearColor","setPixelRatio","window","devicePixelRatio","appendChild","domElement","loader","JSONLoader","load","geo","mat","i","phongMat","MeshPhongMaterial","Mesh","scale","Color","render","new_color","new_rotate","new_x","new_y","new_z","console","log","length","requestAnimationFrame","rotation","y","Number","sin","cameraZ","update"],"mappings":"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","file":"script.js","sourcesContent":["var vm = new Vue({\n  el: '#mycounter',\n  data: {\n    count: 0\n  },\n  methods: {\n    countUp: function() {\n            this.count++;\n            changeRotateSpeed ();\n      }\n  }\n});\n\nvar vm_stop = new Vue({\n  el: '#mystop',\n  methods: {\n    hsStop: function() {\n            Speed_0();\n    }\n  }\n});\n\nlet howManySpinners = 2;\nlet scene = new THREE.Scene();\nlet box;\nlet controls;\nlet renderer;\nlet camera;\nlet model = [];\n//let model = {};\nlet model2 = {};\nlet model3 = {};\nlet rotate_speed = 0.05;\nlet r_radian = 0;\nlet c_radian = 0;\nlet geometry;\nlet material;\nvar hs_color;\nvar hs_rotate;\n\n//////////////////////////\n// firebase 処理\n/////////////////////////\n\n\nvar db = firebase.database();\nvar fbHandSpinners = db.ref(\"/handspinners/\");\n//\n\n//\nfunction changeData() {\n\ths_color = document.getElementById(\"new_color\").value;\n\ths_rotate = document.getElementById(\"new_rotate\").value;\n\tlet randId =  Math.floor(Math.random()*1000);\n\tlet randX = 600 * Math.random()-300;\n\tlet randY = 600 * Math.random()-300;\n\tlet randZ = 400 * Math.random()-200;\n\n\n\tfbHandSpinners.push(\n//\t\t{ \"handspinners\" :\n\t\t\t\t{ [Math.floor(Math.random()*1000)] :\n\t\t\t\t//{ randId :\n\t\t \t\t\t{\"color\": hs_color, \"rotate\": hs_rotate,\n\t\t\t\t\t　\"x_position\": randX, \"y_position\": randY, \"z_position\": randZ\n\t\t\t\t\t}\n\n//\t\t\t\t}\n\t\t});\n\n\n\n\t// fbColor.on(\"value\", function(snapshot) {\n\t//document.getElementById(\"hsColor\").innerText =  //snapshot.val().text;\n\t// \ths_color = snapshot.val().text;\n\t// \tconsole.log(hs_color);\n\t// \tvar text = document.getElementById(\"my_text\").value;\n\t//   fbColor.set({\"color\": hs_color});\n\t// });\n\n\n\t// console.log(return_val);\n\n\t// for (let i=0 ; i < howManySpinners; i++) {\n\t//   \tmodel[i].material.color = new THREE.Color(hs_color);\n\t// }\n}\n\nfbHandSpinners.on(\"child_added\", function(snapshot) {\n\n\t//console.log (snapshot);\n\t//console.log(JSON.stringify(snapshot));\n\tlet myJson = JSON.stringify(snapshot);\n\n\t//console.log(myJson);\n\n\t// for (let key  in snapshot) {\n\tlet row_data = snapshot.val();\n\tlet tmp_key = (Object.keys(row_data))[0];\n\t// console.log(row_data);\n\t// console.log(tmp_key);\n  //\n\t// console.log(row_data[tmp_key]);\n\t// console.log(row_data[row_data[tmp_key]].color);\n\t// console.log(\trow_data[tmp_key].x_position);\n\n\n\t// }\n\t// console.log (Object.keys(myJson));\n\n\t//renderHandSpinner(snapshot);\n\n\n\taddHandSpinner(\n\t \trow_data[tmp_key].color,\n\t \trow_data[tmp_key].rotate,\n\t \trow_data[tmp_key].x_position,\n\t \trow_data[tmp_key].y_position,\n\t \trow_data[tmp_key].z_position,\n\t);\n\n\n  // document.getElementById(\"hsColor\").innerText = snapshot.val().color;\n \t// hs_color = snapshot.val().color;\n  //\n\t// console.log(snapshot);\n  //\n\t// for (let i=0 ; i < howManySpinners; i++) {\n\t// \tmodel[i].material.color = new THREE.Color(hs_color);\n\t// }\n\n});\n\n\n//////////////////////////\n//\n///////////////////////////\n\nfunction renderHandSpinner (snapshot) {\n  'use strict';\n  let light;\n  let ambient;\n  let gridHelper;\n\tlet axisHelper;\n  let lightHelp;\n  let width = 1200;\n  let height = 1200;\n\tlet modelPath ;\n\n   //light\n  light = new THREE.DirectionalLight(0xffffff, 1);\n  light.position.set(0, 200, 80);\n  scene.add(light);\n  ambient = new THREE.AmbientLight(0x404040);\n  scene.add(ambient);\n\n\t//camera\n  camera = new THREE.PerspectiveCamera(45, width /　height, 1 , 1000);\n  camera.position.set(0, 400, 300);\n  camera.lookAt(scene.position);\n\n  // helper 現在は非表示\n  //gridHelper = new THREE.GridHelper(200, 50);\n  //scene.add(gridHelper);\n  //axisHelper = new THREE.AxisHelper(1000);\n  //scene.add(axisHelper);\n  //lightHelper = new THREE.DirectionalLightHelper(light , 20)\n  //scene.add(lightHelper);\n\n  //controls\n  controls = new THREE.OrbitControls(camera);\n  //cameraの自動回転\n  controls.autoRotate = true;\n  controls.autoRotateSpeed = 1.5;\n\n  // renderer\n  renderer = new THREE.WebGLRenderer({ antialias: true });\n  renderer.setSize(width, height);\n  renderer.setClearColor(0xffffff);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  document.getElementById('stage').appendChild(renderer.domElement);\n\n\t//modelPath = 'src/bear.json';\n\t//modelPath = 'src/handspiner_3d.json';\n  //modelPath = '../src/data/handspiner_3d_geo.json';\n  //modelPath = './src/data/handspiner_3d_geo.json';\n  modelPath = './data/handspiner_3d_geo.json';\n\t//modelPath = '/Users/yoshimurahiroyuki/workspace/threejs/src/handspiner.json';\n\n  let loader = new THREE.JSONLoader();　　\n  loader.load(modelPath, function(geo, mat) {　　　\n    //let phongMat = new THREE.MeshPhongMaterial(mat);\n    //let phongMat2 = new THREE.MeshPhongMaterial(mat);\n    //let phongMat3 = new THREE.MeshPhongMaterial(mat);\n    //for (let mt of faceMat.materials) {\n    //  mt.color = new THREE.Color(0xffcc88);\n  \t//}\n    geometry = geo;\n    material = mat;\n\n\t\t//for (let i=0; i < howManySpinners; i++ ) {\n\t\tfor (let i=0; i < 20; i++ ) {\n      let phongMat = new THREE.MeshPhongMaterial(mat);\n      model[i] = new THREE.Mesh(geo, phongMat);\n\n\t\t\tlet randX = 600 * Math.random()-300;\n\t\t\tlet randY = 600 * Math.random()-300;\n\t\t\tlet randZ = 400 * Math.random()-200;\n\n      if (i==0) {\n\t\t\t\tmodel[i].position.set(0, 20, 0);\n\t\t\t} else {\n\t\t\t\tmodel[i].position.set(randX, randY, randZ);\n\t\t\t}　　\n\n    \tmodel[i].scale.set(0.5, 0.5, 0.5);　\n    \t// let randColor = Math.random() * 0xffffff ;\n\t\t\tmodel[i].material.color = new THREE.Color(hs_color);　　　\n    \t//model[i].material.color = new THREE.Color(randColor);\n    \tscene.add(model[i]);　　　\n\t\t}\n    render();\n  });　\n}\n\nfunction addHandSpinner (new_color, new_rotate, new_x, new_y, new_z ) {\n  let phongMat = new THREE.MeshPhongMaterial(material);\n  model.push (new THREE.Mesh(geometry, phongMat));\n\n  //let size = Math.random();\n\tconsole.log(new_x);\n\n\n\t//model[model.length - 1].scale.set(size, size, size);　　　\n  model[model.length - 1].position.set(new_x, new_y, new_z);\n\n\t//model.material.color = new THREE.Color(randColor);\n\tmodel[model.length - 1].material.color = new THREE.Color(new_color);\n\tmodel[model.length - 1].rotate = new_rotate;\n\tconsole.log(model);\n\n\tscene.add(model[model.length - 1]);　\n}\n\nfunction render () {\n\n  requestAnimationFrame(render);\n  r_radian += 0.01;\n\n\tfor (let i=0; i < model.length; i++ ) {\n  \t//model[i].rotation.y += rotate_speed;\n\t\tlet rotate_speed = model[i].rotate ? model[i].rotate : 0.01;\n\t\tconsole.log(rotate_speed);\n\t\tmodel[i].rotation.y += Number(rotate_speed);\n\t\t// model[i].rotation.y += 0.1;\n\t\t// //model[i].rotation.y += rotate_speed;\n\t\t// model[i].rotation.y += 0.1;\n\t\tif (i%2==0) model[i].rotation.y += 0.06 ;\n\t\tif (i%7==0) model[i].rotation.y += 0.1 ;\n\n    model[i].position.y += (Math.sin(r_radian) - Math.sin(r_radian-0.01))*150 ;\n\t}\n\n\tc_radian += 0.007;\n  let cameraZ = 150 * (Math.sin(c_radian)) +150;\n // let cameraZ = 0;\n\tcamera.position.set(0, 600, cameraZ);\n\n  controls.update();\n  renderer.render(scene, camera);\n}\n\nfunction changeRotateSpeed () {\n  //controls.autoRotateSpeed = vm.count*10;\n \trotate_speed += vm.count*0.01;\n  for (let i=0 ; i < howManySpinners; i++) {\n\t\t// model[i].material.color = new THREE.Color(hs_color);\n\t\tmodel[i].rotation.y = 1.8*vm.count;\n  }\n}\n\nfunction Speed_0 () {\n  vm.count = 0;\n  rotate_speed = 0;\n \t//addSpinner();\n}\n\nrenderHandSpinner();\n"]}